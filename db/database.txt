create database bones;
\c bones

create table usuario(id_usuario serial primary key,
                nombre_usuario varchar(24) not null,
                ap_pat_usuario varchar(32),
                ap_mat_usuario varchar(32),
                correo varchar(64) unique not null,
                contrasena varchar(32) not null,
                no_telefono bigint);

create table cliente(id_cliente serial primary key,
                id_usuario int, foreign key(id_usuario) references usuario(id_usuario) on update cascade on delete cascade,
                preferencias varchar(256));

create table supervisor(id_supervisor serial primary key,
                id_usuario int, foreign key(id_usuario) references usuario(id_usuario) on update cascade on delete cascade);

create table museo(id_museo serial primary key,
                nombre varchar(128) not null,
                categoria varchar(256) not null,
                sinopsis varchar(256),
                estado varchar(64) not null,
                colonia varchar(128) not null,
                calle varchar(128) not null,
                detalles varchar(128) default '[No se ha proporcionado informacion]',
                map_url varchar(256),
                address_url varchar(256),
                about varchar(2048),
                puntuacion float check(puntuacion >= 0 and puntuacion <= 5) default 0,
                visitas int default 0,
                vid_url varchar(1024),
                img_url varchar(6150));

create table proveedor(id_supervisor serial primary key,
                id_usuario int, foreign key(id_usuario) references usuario(id_usuario) on update cascade on delete cascade,
                id_museo int, foreign key(id_museo) references museo(id_museo) on update cascade on delete cascade);

create table boleto(id_boleto serial primary key,
                id_cliente int, foreign key(id_cliente) references cliente(id_cliente) on update cascade on delete cascade,
                fecha_compra date,
                fecha_vencimiento date,
                descripcion varchar(512));

create table comentario(id_comentario serial primary key,
                id_comentario_responde int, foreign key(id_comentario_responde) references comentario(id_comentario),
                id_usuario int, foreign key(id_usuario) references usuario(id_usuario) on update cascade on delete cascade,
                id_supervisor int, foreign key(id_supervisor) references supervisor(id_supervisor) on update cascade on delete cascade,
                texto varchar(512) not null);

create table pago(id_pago serial primary key,
                cantidad float not null,
                fecha_pago date not null);

create table paypal(id_paypal int,
                primary key(id_paypal), foreign key(id_paypal) references pago(id_pago));

create table tarjeta(id_tarjeta int,
                primary key(id_tarjeta), foreign key(id_tarjeta) references pago(id_pago) on update cascade on delete cascade);

create table valoracion(id_valoracion serial primary key,
                id_cliente int, foreign key(id_cliente) references cliente(id_cliente) on update cascade on delete cascade,
                estrellas int check(estrellas >= 1 and estrellas <= 5) not null,
                opinion varchar(256) not null);

insert into usuario(nombre_usuario, correo, contrasena) values('Admin', 'admin@email.com', 'admin.1234');

categorias disponibles "Arte Cultura Arqueologia Tecnologia Arquitectura Antropologia Etniografia";



insert into museo(nombre, categoria, sinopsis, estado, colonia, calle, detalles, map_url, address_url, about, puntuacion, visitas) values
    ('Alfa', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 4.8, 1576),
    ('Beta', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 1.1, 5165),
    ('Gamma', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 2.2, 2614),
    ('Delta', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 3.3, 1560),
    ('Epsilon', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 4.4, 6514),
    ('Zeta', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 1.5, 6421),
    ('Eta', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 2.1, 5642),
    ('Theta', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 3.2, 5647),
    ('Iota', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 4.3, 2436),
    ('Kappa', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 1.4, 1545),
    ('Lambda', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 2.5, 2648),
    ('Mi', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 3.1, 1264),
    ('Ni', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 4.2, 5649),
    ('Xi', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 1.3, 5942),
    ('Omicron', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 2.4, 1548),
    ('Pi', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 5, 4862);
    ('Prueba', ' Cultura Arqueologia Tecnologia Arquitectura ', 'Museo DELTA, lleno de un monton de deltas','Estado de Mexico', 'Tecamac', 'Jardines del mar', 'al lado de una similares', 'https://maps.app.goo.gl/iXm1ud1E3gpGZoJy5', 'https://www.youtube.com/watch?v=j9jNb5WRQTQ', 'Esta es una descripcion extensa sobre que trata el museo que tiene y mas wevadas', 3, 100);